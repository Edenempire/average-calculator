<!doctype html>

<html lang="en" data-theme="dark" data-stealth="false">
   
<head>
   
<meta charset="utf-8">
   
<meta name="viewport" content="width=device-width,initial-scale=1">
   
<title>Average Calculator</title>

<style>
/* ========================= CORE ========================= */
:root{
  --bg:#0b0d10;--fg:#f2f2f2;--muted:#9aa0aa;
  --soft:#161a22;--accent:#4c8dff;--danger:#ff3b3b;
  --bw:2px;--br:10px;--mono:"JetBrains Mono",monospace;
  --t:.25s ease;
}
[data-theme="light"]{--bg:#fff;--fg:#000;--soft:#f3f3f3;--accent:#0a5cff}
[data-theme="oled"]{--bg:#000;--fg:#eaeaea;--soft:#050505;--accent:#00ff9c}
[data-theme="terminal"]{--bg:#001400;--fg:#00ff66;--soft:#002200;--accent:#00ff66}
[data-theme="midnight"]{--bg:#050914;--fg:#dce3ff;--soft:#0a1022;--accent:#6b8cff}
[data-theme="amber"]{--bg:#120900;--fg:#ffbf66;--soft:#1c1206;--accent:#ff9f1a}
[data-theme="redacted"]{--bg:#0e0e0e;--fg:#d8d8d8;--soft:#141414;--accent:#888}
[data-theme="ice"]{--bg:#eef6ff;--fg:#0b1a2a;--soft:#d9e9ff;--accent:#2a7cff}

/* ========================= BASE ========================= */
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--fg);font-family:var(--mono)}
.hidden{display:none}
.app{max-width:1600px;margin:auto;padding:16px;display:flex;flex-direction:column;gap:20px}
header,section,aside{border:var(--bw) solid var(--fg);border-radius:var(--br);padding:16px}
main{display:grid;grid-template-columns:1fr 480px;gap:24px}
[data-stealth="true"] aside{display:none}
button,input,select,textarea{
  background:var(--bg);color:var(--fg);
  border:var(--bw) solid var(--fg);border-radius:8px;
  padding:6px 10px;font-family:var(--mono)
}
button:hover{background:var(--soft)}
.small{font-size:.75rem;color:var(--muted)}

/* ========================= PLAYER ========================= */
.controls{display:flex;flex-wrap:wrap;gap:6px}
.progress{height:10px;border:1px solid var(--fg);border-radius:6px;cursor:pointer}
.fill{height:100%;width:0;background:var(--accent)}
.track{padding:4px;border-radius:6px;cursor:pointer}
.track[aria-current="true"]{background:var(--accent);color:#fff}
kbd{border:1px solid var(--fg);border-radius:4px;padding:1px 4px;font-size:.7rem}
</style>
</head>

<body>
<div class="app" id="app">

<header>
  <div>
    <h1>AVERAGE CALCULATOR</h1>
    <div class="small">Tier-3</div>
  </div>
  <div>
    <button id="themeBtn">Theme</button>
    <button id="stealthBtn">Stealth</button>
    <button id="panicBtn">Silence</button>
  </div>
</header>

<main>

<section>
<textarea id="input" placeholder="Enter numeric dataset"></textarea>
<button id="calc">Calculate</button>
<div id="stats"></div>
</section>

<aside>
<h3 class="small">timing</h3>

<div class="controls">
<button id="play">▶</button>
<button id="stop">■</button>
<button id="prev">⏮</button>
<button id="next">⏭</button>
<button id="mute">Mute</button>
<button id="shuffle">Shuffle</button>
<button id="repeat">Repeat</button>
<button id="lock">Lock</button>
</div>

<div class="controls">
<button id="seekB">−5s</button>
<button id="seekF">+5s</button>
<button id="fade">Fade</button>
</div>

<div class="progress" id="progress"><div class="fill" id="fill"></div></div>

<label class="small">Volume</label>
<input id="vol" type="range" min="0" max="1" step="0.01">

<div id="now" class="small"></div>
<div id="tracks"></div>

<div class="small">
<b>Keyboard Guide</b><br>
<kbd>Space</kbd> Play/Pause • <kbd>Enter</kbd> Stop • <kbd>←→</kbd> Seek •
<kbd>↑↓</kbd> Volume • <kbd>N/P</kbd> Track • <kbd>M</kbd> Mute •
<kbd>H</kbd> Stealth • <kbd>X</kbd> Panic
</div>
</aside>

</main>

<footer class="small">--</footer>

<audio id="audio" preload="metadata"></audio>

<script>
   
(()=>{
"use strict";

/* ===================== HARD DISABLE MEDIA SESSION ===================== */
if("mediaSession" in navigator){
  try{
    navigator.mediaSession.metadata=null;
    ["play","pause","seekbackward","seekforward","previoustrack","nexttrack"]
      .forEach(a=>navigator.mediaSession.setActionHandler(a,null));
  }catch(e){}
}

/* ===================== UTIL ===================== */
const $=id=>document.getElementById(id);
const clamp=(v,min,max)=>Math.min(max,Math.max(min,v));

/* ===================== STATE ===================== */
const state={
  theme:0,stealth:false,idx:0,locked:false,
  shuffle:0,repeat:0,fade:false
};

/* ===================== THEMES ===================== */
const themes=["dark","light","oled","terminal","midnight","amber","redacted","ice"];
themeBtn.onclick=()=>{
  state.theme=(state.theme+1)%themes.length;
  document.documentElement.dataset.theme=themes[state.theme];
};

/* ===================== STEALTH / PANIC ===================== */
stealthBtn.onclick=()=>document.documentElement.dataset.stealth=
  document.documentElement.dataset.stealth==="true"?"false":"true";
panicBtn.onclick=()=>{audio.pause();audio.currentTime=0;audio.volume=0};

/* ===================== AUDIO ===================== */
const audio=$("audio");
const tracks=[...Array(40)].map((_,i)=>String(i+1).padStart(2,"0")+".mp3");

tracks.forEach((t,i)=>{
  const d=document.createElement("div");
  d.textContent=t;
  d.className="track";
  d.onclick=()=>!state.locked&&play(i);
  tracks.appendChild(d);
});

function play(i){
  if(i<0||i>=tracks.length)return;
  state.idx=i;
  audio.src=tracks[i];
  audio.play().catch(()=>{});
  now.textContent=tracks[i];
  [...tracks.children].forEach((e,j)=>e.setAttribute("aria-current",j===i));
}

play.onclick=()=>audio.paused?play(state.idx):audio.pause();
stop.onclick=()=>{audio.pause();audio.currentTime=0};
prev.onclick=()=>!state.locked&&play((state.idx-1+tracks.length)%tracks.length);
next.onclick=()=>!state.locked&&play((state.idx+1)%tracks.length);
mute.onclick=()=>audio.muted=!audio.muted;
lock.onclick=()=>state.locked=!state.locked;
seekB.onclick=()=>audio.currentTime=Math.max(0,audio.currentTime-5);
seekF.onclick=()=>audio.currentTime+=5;
vol.oninput=()=>audio.volume=vol.value;

audio.ontimeupdate=()=>fill.style.width=
  ((audio.currentTime/audio.duration)*100||0)+"%";

/* ===================== KEYBOARD ===================== */
document.onkeydown=e=>{
  if(e.target.tagName==="TEXTAREA")return;
  if(e.code==="Space"){e.preventDefault();play.click()}
  if(e.key==="Enter")stop.click();
  if(e.key==="ArrowRight")audio.currentTime+=5;
  if(e.key==="ArrowLeft")audio.currentTime-=5;
  if(e.key==="ArrowUp")audio.volume=clamp(audio.volume+.05,0,1);
  if(e.key==="ArrowDown")audio.volume=clamp(audio.volume-.05,0,1);
  if(e.key==="n")next.click();
  if(e.key==="p")prev.click();
  if(e.key==="m")mute.click();
  if(e.key==="h")stealthBtn.click();
  if(e.key==="x")panicBtn.click();
};

/* ===================== STATS ENGINE ===================== */
calc.onclick=()=>{
  const arr=input.value.split(/[^0-9eE+.-]+/).map(Number).filter(Number.isFinite);
  if(!arr.length)return;
  const n=arr.length;
  const mean=arr.reduce((a,b)=>a+b,0)/n;
  const rms=Math.sqrt(arr.reduce((a,b)=>a+b*b,0)/n);
  stats.innerHTML=
    `Count:${n}<br>Mean:${mean.toFixed(6)}<br>RMS:${rms.toFixed(6)}`;
};

})();
   
</script>
   
</div>
   
</body>
   
</html>








